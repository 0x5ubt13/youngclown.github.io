<!DOCTYPE html><html lang="lang"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="잘정리하자"><meta name="keywords" content><meta name="author" content="bymin"><meta name="copyright" content="bymin"><title>bymin | 젊은광대 기술블로그</title><link rel="shortcut icon" href="../../melody-favicon.ico"><link rel="stylesheet" href="../../css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="author-info"><div class="author-info__avatar text-center"><img src="../../img/avatar.png"></div><div class="author-info__name text-center">bymin</div><div class="author-info__description text-center">잘정리하자</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="../../archives"><span class="pull-left">Articles</span><span class="pull-right">109</span></a></div></div></div><nav class="no-bg" id="nav"><div id="page-header"><span class="pull-left"> <a id="site-name" href="../../index.html">젊은광대 기술블로그</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="site-info"><div id="site-title">젊은광대 기술블로그</div><div id="site-sub-title">bymin</div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="../../2018/11/2018-11-21-windowsSetting/">WINDOWS 10 Bash Shell</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-11-21</time><div class="content"><h2 id="윈도우즈-10에서-Linux-bash-shell-사용방법"><a href="#윈도우즈-10에서-Linux-bash-shell-사용방법" class="headerlink" title="윈도우즈 10에서 Linux bash shell 사용방법"></a>윈도우즈 10에서 Linux bash shell 사용방법</h2><p>윈도우즈 10에서는 우분투(Ubuntu bash shell) 리눅스  쉘이 사용 가능합니다.<br>윈도우에서 리눅스를 사용할 수 있다니 얼마나 행복한 일인가요~ 현재 베타 버전으로 윈도우 10에서 사용이 가능합니다.<br>사용방법은 비교적 간단합니다.   </p>
<h2 id="윈도우즈-설정으로-이동"><a href="#윈도우즈-설정으로-이동" class="headerlink" title="윈도우즈 설정으로 이동"></a>윈도우즈 설정으로 이동</h2><p>업데이트 및 복구 &gt; 개발자 모드 선택<br>제어판 &gt; 프로그램 &gt; 윈도우 기능켜기/끄기 &gt; 윈도우리눅스프로그램(리눅스용윈도우 하위시스템) 선택  </p>
<h2 id="Open-PowerShell-as-Administrator-and-run"><a href="#Open-PowerShell-as-Administrator-and-run" class="headerlink" title="Open PowerShell as Administrator and run:"></a>Open PowerShell as Administrator and run:</h2><p>PowerShell<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux</span><br></pre></td></tr></table></figure></p>
<p>윈도우즈의 Microsoft Store에서 다운받아 설치하는 합니다.<br><a href="https://aka.ms/wslstore" rel="external nofollow noopener noreferrer" target="_blank">윈도우 우분투</a> 이동 후 앱에서 ubuntu를 클릭하여 설치합니다.</p>
<p>루트권한으로 접속하기 위해서는,<br>만약 루트 권한으로 바꾸려면,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br></pre></td></tr></table></figure>
<p>명령어를 사용하면 가능함. 실제 경로는 윈도우즈 최근 버젼에서는!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\%USERNAME%\AppData\Local\Packages\CanonicalGroupLimited.UbuntuonWindows_79rhkp1fndgsc\LocalState\rootfs\</span><br></pre></td></tr></table></figure>
<p>이처럼 경로가 좀 더 복잡하게 바뀌었습니다.<br>만약 숨겨진 폴더를 찾기 어려우면 탐색기 옵션에서 숨겨진 폴더 보기 옵션을 선택하시기 바랍니다.<br>찾기가 더 간단하며 이를 즐겨찾기에 포함해두시면 더 좋습니다.</p>
<h2 id="JAVA-설치하기"><a href="#JAVA-설치하기" class="headerlink" title="JAVA 설치하기"></a>JAVA 설치하기</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:webupd8team/java</span><br><span class="line">sudo apt-get update</span><br><span class="line">apt install openjdk-8-jdk-headless</span><br></pre></td></tr></table></figure>
<p>openjdk 를 설치합니다.</p>
<hr>
<h1 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h1><hr>
<ul>
<li><a href="https://docs.microsoft.com/ko-kr/windows/wsl/install-win10" rel="external nofollow noopener noreferrer" target="_blank">Windows 10 Installation Guide</a></li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="../../2018/11/2018-11-20-registerMbeans/">MBean (JMX) Monitoring and Management</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-11-20</time><div class="content"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;Resource name=&quot;xxx&quot; auth=&quot;Container&quot;</span><br><span class="line">     factory=&quot;com.zaxxer.hikari.HikariJNDIFactory&quot;</span><br><span class="line">     type=&quot;javax.sql.DataSource&quot;</span><br><span class="line">     minimumIdle=&quot;30&quot;</span><br><span class="line">     maximumPoolSize=&quot;30&quot;</span><br><span class="line">     maxLifetime=&quot;3600000&quot;</span><br><span class="line">     connectionTimeout=&quot;5000&quot;</span><br><span class="line">     dataSourceClassName=&quot;com.mysql.jdbc.jdbc2.optional.MysqlDataSource&quot;</span><br><span class="line">     dataSource.cachePrepStmts=&quot;true&quot;</span><br><span class="line">     dataSource.prepStmtCacheSize=&quot;250&quot;</span><br><span class="line">     dataSource.prepStmtCacheSqlLimit=&quot;2048&quot;</span><br><span class="line">     registerMbeans=&quot;true&quot;</span><br><span class="line">     dataSource.logger=&quot;com.mysql.jdbc.log.StandardLogger&quot;</span><br><span class="line">     dataSource.logSlowQueries=&quot;false&quot;</span><br><span class="line">     dataSource.dumpQueriesOnException=&quot;false&quot;</span><br><span class="line">     dataSource.user=&quot;xxxx&quot;</span><br><span class="line">     dataSource.password=&quot;xxxx&quot;</span><br><span class="line">     dataSource.url=&quot;jdbc:mysql:/xxxxx:3306/xxx?autoReconnect=true&quot;</span><br><span class="line">     validationQuery=&quot;SELECT 1&quot;</span><br><span class="line">     validationInterval=&quot;240000&quot;</span><br><span class="line">     testWhileIdle=&quot;true&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>초창기 JNDI(tomcat-jdbc)의 경우 JMX(jconsole 등)에 대한 설정에서 자동으로 dbfool 이 보였으나,<br>HikariCP를 적용하면,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">registerMbeans=true</span><br></pre></td></tr></table></figure>
<p>를 해야지만, JMX 에서 확인이 가능하다고 합니다.<br>스프링 부트 2.0 의 default DBCP가 hikariCP 가 되었다고 합니다.</p>
<p>항상 hikariCP의 설명을 보면, 엄청 빠르고 가볍고, 신뢰할 수 있다고 설명합니다.<br>심지어 “zero-overhead”라며 엄청나게 높은 성능을 강조합니다.</p>
<p>2년전에 도입되었는데, 스프링 부트 2.0 의 default가 되었다는 것은 확실히 빠른다 뭐 그런 의미겠지요.</p>
<hr>
<h1 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h1><hr>
<ul>
<li><a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Migration-Guide#configuring-a-datasource" rel="external nofollow noopener noreferrer" target="_blank">HikariCP</a></li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="../../2018/11/2018-11-05-context/">Cannot create JDBC driver of class</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-11-05</time><div class="content"><p>새로운 db connection 을 연결했는데,<br>Tomcat에서 datasource/context정보를 못찾을 때.<br>다음과 같은 오류 내용이 발생했습니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cannot create JDBC driver of class &apos;&apos; for connect URL &apos;null&apos;</span><br></pre></td></tr></table></figure>
<p>일때.<br>datasource.properties  를 설정하여 처리하도록 작업이 되어있으며,<br>tomcat의 server.xml 을 설정해두었는데,<br>server.xml 파일 <host>태그에 하부 엘리먼트로<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Context&gt;</span><br><span class="line">    &lt;ResourceLink name=&quot;xxx&quot; global=&quot;xxx&quot; type=&quot;javax.sql.DataSource&quot;/&gt;</span><br><span class="line">&lt;/Context&gt;</span><br></pre></td></tr></table></figure></host></p>
<p>위와같이 설정했어야했는데, context.xml 쪽 이슈는 빼면서 발생했습니다.<br>ResourceLink 를 통해, server.xml 에서 정의하였습니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;Resource name=&quot;xxx&quot; auth=&quot;Container&quot;</span><br><span class="line">     factory=&quot;com.zaxxer.hikari.HikariJNDIFactory&quot;</span><br><span class="line">     type=&quot;javax.sql.DataSource&quot;</span><br><span class="line">     minimumIdle=&quot;30&quot;</span><br><span class="line">     maximumPoolSize=&quot;30&quot;</span><br><span class="line">     maxLifetime=&quot;3600000&quot;</span><br><span class="line">     connectionTimeout=&quot;5000&quot;</span><br><span class="line">     dataSourceClassName=&quot;com.mysql.jdbc.jdbc2.optional.MysqlDataSource&quot;</span><br><span class="line">     dataSource.cachePrepStmts=&quot;true&quot;</span><br><span class="line">     dataSource.prepStmtCacheSize=&quot;250&quot;</span><br><span class="line">     dataSource.prepStmtCacheSqlLimit=&quot;2048&quot;</span><br><span class="line">     registerMbeans=&quot;true&quot;</span><br><span class="line">     dataSource.logger=&quot;com.mysql.jdbc.log.StandardLogger&quot;</span><br><span class="line">     dataSource.logSlowQueries=&quot;false&quot;</span><br><span class="line">     dataSource.dumpQueriesOnException=&quot;false&quot;</span><br><span class="line">     dataSource.user=&quot;xxxxx&quot;</span><br><span class="line">     dataSource.password=&quot;xxxxx&quot;</span><br><span class="line">     dataSource.url=&quot;jdbc:mysql://xxxxx:3306/xxx?autoReconnect=true&quot;</span><br><span class="line">     validationQuery=&quot;SELECT 1&quot;</span><br><span class="line">     validationInterval=&quot;240000&quot;</span><br><span class="line">     testWhileIdle=&quot;true&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>resource에 정의해두었기 때문에 server.xml 에만 정의하면 이슈가 발생합니다.</p>
<hr>
<h1 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h1><hr>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="../../2018/10/2018-10-29-eclipse/">이클립스 CPU 100%</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-10-29</time><div class="content"><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">linking viewer selection with current editor</span><br></pre></td></tr></table></figure>
<p>위와같은 메시지가 우측하단에 노출되면서 cpu 100% 를 차지하는데, 실제 메모리라든가 다른 문제는 없었습니다.<br>소스 수정 및 반영을 하는데도 상당히 시간이 오래 걸렸는데,<br>인터넷 서핑을 해보니,<br>eclipse 의 PermSize 를 늘려주지 문제가 해결되었다고 합니다.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-XX:PermSize=512m</span><br><span class="line">-XX:MaxPermSize=512m</span><br><span class="line">-Xms2048m</span><br><span class="line">-Xmx2048m</span><br></pre></td></tr></table></figure></p>
<p>PermSize 하고, MaxPermSize 기능 추가했습니다.</p>
<p>성능향상을 위해,<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Help-&gt;About Eclipse-&gt;Installation Details-&gt;Installed Software</span><br></pre></td></tr></table></figure></p>
<p>mylyn 플러그인 제거(php 용)하였습니다.<br>어느정도 성능이 안정화되었지만,<br>결국 이클립스보다 인텔리J로 코딩할때 안정감이 있어, 툴 변경을 고민중입니다.</p>
<p>==== 2018.11.20 추가내용 ====<br>아무리 해도 해결이 안되어서 인텔리J로 작업중이었는데,<br>창을 전부 닫고,<br>재시작하니 문제가 해결되었습니다.<br>PermSize라기보다,<br>프로젝트를 자주 close 하고 다시 open 하면서 남겨있던 java 파일과 linking viewer 사이에 뭔가 문제가 발생해서, 지연이 발생된게 아닌가 추측합니다.</p>
<hr>
<h1 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h1><hr>
<ul>
<li><a href="https://stackoverflow.com/questions/7315019/problem-in-linking-viewer-selection-with-current-editor-eclipse" rel="external nofollow noopener noreferrer" target="_blank">problem in linking viewer selection with current editor - Eclipse</a></li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="../../2018/10/2018-10-27-springboot/">스프링 프레임워크를 기반으로 한 개발플랫폼 01</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-10-29</time><div class="content"><h2 id="스프링-부트-기능정의"><a href="#스프링-부트-기능정의" class="headerlink" title="스프링 부트 기능정의"></a>스프링 부트 기능정의</h2><p>단독실행가능한 스프링 애플리케이션 생성<br>내장 컨테이너로 톰캣, 제티, 혹은 언더토우 중에서 선택가능<br>스타터(starter)를 통해 간결한 의존성 구성지원<br>스프링에 대한 자동구성(Auto-Configuration) 제공<br>더이상 XML 구성 필요없음 (pom.xml 정도만 작업 후 순수한 자바만 가지고 적용가능.<br>제품 출시(release) 후 운영에 필요한 다양한 기능(상태점검, 모니터링 등) 제공 (healthcheck?)</p>
<h2 id="스프링부트-구성요소"><a href="#스프링부트-구성요소" class="headerlink" title="스프링부트 구성요소"></a>스프링부트 구성요소</h2><p>빌드도구(그레이들 vs 메이븐) : 요근대는 그레이들을 많이씀. (아직 maven 사용)<br>스프링 프레임워크(4.x vs 5.x)<br>스프링 부트(v1.5 vs v2.0)<br>스프링 부트 스타터(spring-boot-starter)</p>
<p>프랑스 철학자 ‘장 풀 샤르트르’가 인생은 BCD 라고 했다고 합니다.<br>태어나고(Bitch)- 죽는(Death) 사이에 수많은 선택을 한다고,</p>
<p>스트링 부트 또한 BCD입니다.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Build - Code - Deploy</span><br></pre></td></tr></table></figure></p>
<ul>
<li>Build</li>
<li>Code.<ul>
<li>spring-boot-starter</li>
<li>Auto-configuration</li>
<li>programming in spring enviroment</li>
</ul>
</li>
<li>Deploy</li>
</ul>
<h2 id="Build-빌드"><a href="#Build-빌드" class="headerlink" title="Build(빌드)"></a>Build(빌드)</h2><p>[spring initializr]:(<a href="https://start.spring.io)를" rel="external nofollow noopener noreferrer" target="_blank">https://start.spring.io)를</a> 통해 파일을 생성해서 다운받을 수 있습니다.</p>
<h2 id="Java-va-Kotilin-vs-Groovy"><a href="#Java-va-Kotilin-vs-Groovy" class="headerlink" title="Java va Kotilin vs Groovy"></a>Java va Kotilin vs Groovy</h2><p>스프링 부트는 자바, 코틀린, 그루비를 지원합니다.</p>
<p>빌드도구로는 그레이들과 메이븐이 있는데,<br>의존성과 빌드동작들을 실행하는 스크립트가 존재합니다.<br>그래들은 build.gradle 에 선언하고 maven의 경우 pom.xml 에 선언하게 됩니다.</p>
<p>Executable Jar or war</p>
<p>실행학능한(Executable) JAR (or WAR) : App 과 tocmat 이 공존<br>고전적인 WAR : 톰캣과 APP이 분리되어있는 형태</p>
<h2 id="스프링부트는-2-0부터"><a href="#스프링부트는-2-0부터" class="headerlink" title="스프링부트는 2.0부터!!"></a>스프링부트는 2.0부터!!</h2><p>1.5 는 스프링 4 지원 2.0은 스프링 5 지원이며 주가되는 것은 스프링부트 2.0을 주가 됩니다.</p>
<h2 id="스프링부트는-애너테이션-기반으로-작동-컴포넌트를-탐색하여-동작함"><a href="#스프링부트는-애너테이션-기반으로-작동-컴포넌트를-탐색하여-동작함" class="headerlink" title="스프링부트는 애너테이션 기반으로 작동(컴포넌트를 탐색하여 동작함.)"></a>스프링부트는 애너테이션 기반으로 작동(컴포넌트를 탐색하여 동작함.)</h2><p>@SpringBoodtApplication(with SpringApplication)<br>@ComponentScan<br>@EnableAutoConfiguration<br>@configuration<br>@ConditonalOn~~<br>@SpringBoodtConfigration(= @Configuration)<br>@EnableConfigurationProperties<br>@ConfigurationProperties</p>
<h2 id="Auto-Configuration"><a href="#Auto-Configuration" class="headerlink" title="Auto-Configuration"></a>Auto-Configuration</h2><ul>
<li>spring-starter 를 github에서 검색가능합니다.</li>
<li>스프링부트가 기술흐름에 따라 제공하는 관례(Convention)적인 구성</li>
<li>봐야할 모듈 : spring-boot-autoconfigure</li>
<li>동작선언<ul>
<li>@EnableAtuoConfigurazion(with @SpringBootApplication)</li>
<li>@Configuration</li>
</ul>
</li>
<li>tkdyd dosjxpdltus<ul>
<li>@Configuration</li>
<li>@ConditonalOn</li>
</ul>
</li>
</ul>
<h2 id="외부구성-External-Configuration"><a href="#외부구성-External-Configuration" class="headerlink" title="외부구성(External Configuration)"></a>외부구성(External Configuration)</h2><ol>
<li>실행인자</li>
<li>spring_application_json<ul>
<li>서버안에 json 으로 선언한 구성파일의 위치 지정</li>
</ul>
</li>
<li>환경변수(운영체제)</li>
<li>기타등등</li>
<li>application.yml or application.properties</li>
<li>application-{defaultprofiles}.yml</li>
</ol>
<p>1이 우선순위가 가장높습니다.</p>
<h2 id="Programming-in-Spring-Environment"><a href="#Programming-in-Spring-Environment" class="headerlink" title="Programming in Spring Environment"></a>Programming in Spring Environment</h2><ul>
<li>@ComponentScan 을 통해 ApplicationContext 적재<ul>
<li>@Repository</li>
<li>@Component</li>
<li>@Service</li>
<li>@Controller &amp; @RestController</li>
<li>@Configuratioin<ul>
<li>@Bean</li>
<li>@ConfiguraitonProperties</li>
</ul>
</li>
<li>DI, IoC, @Autowired</li>
<li>@Value Vs @ConfigurationProperties</li>
<li>AOP 프로그래밍</li>
</ul>
</li>
</ul>
<p>완료<br>– 업무 구현(비즈니스 로직)</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="../../2018/10/2018-10-29-clean_package/">clean package -P</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-10-29</time><div class="content"><p>maven package clean 하게 처리하면서 pom.xml 에 기술한 resource 를 사용하는 법입니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clean package -P</span><br></pre></td></tr></table></figure>
<p>-P는 정의된 profies중 하나를 처리함을 의미합니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- profile definition --&gt;</span><br><span class="line">   &lt;profiles&gt;</span><br><span class="line">       &lt;profile&gt;</span><br><span class="line">           &lt;id&gt;local&lt;/id&gt;</span><br><span class="line">           &lt;activation&gt;</span><br><span class="line">               &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;</span><br><span class="line">           &lt;/activation&gt;</span><br><span class="line">           &lt;properties&gt;</span><br><span class="line">               &lt;environment&gt;&lt;/environment&gt;</span><br><span class="line">           &lt;/properties&gt;</span><br><span class="line">       &lt;/profile&gt;</span><br><span class="line">       &lt;profile&gt;</span><br><span class="line">           &lt;id&gt;dev&lt;/id&gt;</span><br><span class="line">           &lt;properties&gt;</span><br><span class="line">               &lt;profile-id&gt;dev&lt;/profile-id&gt;</span><br><span class="line">               &lt;environment&gt;-dev&lt;/environment&gt;</span><br><span class="line">               &lt;maven.test.skip&gt;true&lt;/maven.test.skip&gt;</span><br><span class="line">           &lt;/properties&gt;</span><br><span class="line">       &lt;/profile&gt;</span><br><span class="line">       &lt;profile&gt;</span><br><span class="line">           &lt;id&gt;server&lt;/id&gt;</span><br><span class="line">           &lt;properties&gt;</span><br><span class="line">               &lt;profile-id&gt;server&lt;/profile-id&gt;</span><br><span class="line">               &lt;environment&gt;-server&lt;/environment&gt;</span><br><span class="line">               &lt;maven.test.skip&gt;true&lt;/maven.test.skip&gt;</span><br><span class="line">           &lt;/properties&gt;</span><br><span class="line">       &lt;/profile&gt;</span><br><span class="line">   &lt;/profiles&gt;</span><br></pre></td></tr></table></figure>
<p>위와같이 server, dev, local 등을 설정할 수 있으며 그냥 처리할 경우, activeByDefault에 의해 local 이 default 처리됩니다.<br>resources-batch 와 같이 resource뒤에 접미사를 ‘-dev’ , ‘-batch’등으로 두어 프로파일을 선택할 수 있도록 합니다.</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="../../2018/10/2018-10-29-protocol/">protocol 설정하기</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-10-29</time><div class="content"><h2 id="org-apache-coyote-http11-Http11NioProtocol-로-변경"><a href="#org-apache-coyote-http11-Http11NioProtocol-로-변경" class="headerlink" title="org.apache.coyote.http11.Http11NioProtocol 로 변경"></a>org.apache.coyote.http11.Http11NioProtocol 로 변경</h2><p>BIO connector  에 비해서 NIO connector 를 사용하는 것 자체로 20~30% 정도의 성능 향상이 이루어진다고 합니다.<br>현재 server.xml 을 보았을 때,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;Connector protocol=&quot;HTTP/1.1&quot; port=&quot;80&quot; enableLookups=&quot;false&quot; tcpNoDelay=&quot;true&quot;  compression=&quot;off&quot;</span><br><span class="line">           maxThreads=&quot;5000&quot; minSpareThreads=&quot;50&quot; acceptCount=&quot;10&quot; connectionTimeout=&quot;8000&quot;</span><br><span class="line">           maxKeepAliveRequests=&quot;-1&quot; maxHttpHeaderSize=&quot;40960&quot;</span><br><span class="line">/&gt;</span><br><span class="line"></span><br><span class="line">   &lt;Connector port=&quot;443&quot; keystoreFile=&quot;파일경로&quot;                </span><br><span class="line">               keystorePass=&quot;비밀번호&quot; protocol=&quot;org.apache.coyote.http11.Http11Protocol&quot;</span><br><span class="line">              maxThreads=&quot;4000&quot; SSLEnabled=&quot;true&quot; scheme=&quot;https&quot; secure=&quot;true&quot;</span><br><span class="line">              clientAuth=&quot;false&quot; connectionTimeout=&quot;8000&quot; maxHttpHeaderSize=&quot;40960&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>protocol=”HTTP/1.1”와 protocol=”org.apache.coyote.http11.Http11Protocol”를 사용하고 있습니다.<br>80포트로 사용하는 protocol=”HTTP/1.1” 를 org.apache.coyote.http11.Http11NioProtocol 로 변경하였으며,<br>기존에 쓰던 org.apache.coyote.http11.Http11Protocol 또한 org.apache.coyote.http11.Http11NioProtocol으로 변경하여 전체 서버 적용하여 안정화가 되었다는<br>이야기를 들어, 제 서버에도 적용해봤습니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;Connector protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot; port=&quot;80&quot; enableLookups=&quot;false&quot; tcpNoDelay=&quot;true&quot;  compression=&quot;off&quot;</span><br><span class="line">           maxThreads=&quot;5000&quot; minSpareThreads=&quot;50&quot; acceptCount=&quot;10&quot; connectionTimeout=&quot;8000&quot;</span><br><span class="line">           maxKeepAliveRequests=&quot;-1&quot; maxHttpHeaderSize=&quot;40960&quot;</span><br><span class="line">/&gt;</span><br><span class="line"></span><br><span class="line">   &lt;Connector port=&quot;443&quot; keystoreFile=&quot;파일경로&quot;                </span><br><span class="line">               keystorePass=&quot;비밀번호&quot; protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot;</span><br><span class="line">              maxThreads=&quot;4000&quot; SSLEnabled=&quot;true&quot; scheme=&quot;https&quot; secure=&quot;true&quot;</span><br><span class="line">              clientAuth=&quot;false&quot; connectionTimeout=&quot;8000&quot; maxHttpHeaderSize=&quot;40960&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>전체 변경을 완료했습니다.<br>변경 전과 변경 후의 Thread 갯수와 속도 개선등의 명확한 수치 변화는 확인되지 않았습니다. 오히려 Thread 가 100개 정도 더 증가된 것으로 확인이되네요.</p>
<p>참고로 톰캣에서 protocol을 설정하지 않으면 아래의 2가지 connector를 자동으로 스위칭 한다고 하는데,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">blocking Java connector - org.apache.coyote.http11.Http11Protocol</span><br><span class="line">the APR/native connector - org.apache.coyote.http11.Http11AprProtocol</span><br></pre></td></tr></table></figure>
<p>위의 2가지로 스위칭한다고 합니다.</p>
<hr>
<h1 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h1><hr>
<ul>
<li><a href="https://sejoung.github.io/2018/10/tomcat_thread_blocking_ssl" rel="external nofollow noopener noreferrer" target="_blank">tomcat_thread_blocking_ssl</a></li>
<li><a href="http://bcho.tistory.com/788" rel="external nofollow noopener noreferrer" target="_blank">Apache Tomcat Tuning</a></li>
</ul>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="../../2018/10/2018-10-24-alias_setting/">Alias 설정하기</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-10-24</time><div class="content"><h2 id="alias-란"><a href="#alias-란" class="headerlink" title="alias 란 ?"></a>alias 란 ?</h2><p>일종의 별명으로, 서버에서 작업하거나 모니터링을 할 때,<br>너무 길거나 복잡해서 매번 입력하기 귀찮거나 기억하기 어려운 명령들이 있을 수 있으며,<br>이러한 명령을 자주 사용하지 않는다면 큰 무리가 없겠으나,<br>개개인의 업무 스타일에 따라 자주 사용하게 된다면 그때마다 매번 명령들을 어렵게 입력해야 하는 고통을 감내해야 합니다.<br>alias 기능을 이용하면 어떤 명령이든지 명령의 길이가 얼마이든지 상관없이 내가 사용하기 편하게 바꾸어서 사용할 수 있습니다.  </p>
<p>다만, 그렇게 되면 alias 명령어를 외우게 되어 실제 명령어를 까먹을 수 있으니,<br>alias 설정했다는 것을 잊지 말아야합니다.</p>
<p>사용자별 alias 가 있고,<br>모든 사용자에 대한 alias 가 존재합니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/home/계정명/.bashrc</span><br><span class="line">/etc/bashrc</span><br></pre></td></tr></table></figure>
<p>보통은 root 에서 작업을 한다고 할 경우에,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/home/root/.bashrc</span><br></pre></td></tr></table></figure>
<p>에 alias 를 등록하여 처리하게 됩니다.<br>작업이 완료되면,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure>
<p>를 사용하여 바로 적용하면됩니다.</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="../../2018/10/2018-10-23-nohup_jar/">nohup 을 이용해서 서버 실행. pid 로 자동 stop 기능</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-10-23</time><div class="content"><p>서버내부에서 helthcheck 서버를 구성할 때 처리할 때,<br>특정폴더에 올라간 jar 파일을 가지고,<br>서버를 실행시키거나, 중지시키는 용도의 shell script 입니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">SERVICE_NAME=healthcheck</span><br><span class="line">PATH_TO_JAR=/home/users/deploy/healthcheck.jar</span><br><span class="line">PID_PATH_NAME=/tmp/healthcheck-pid</span><br><span class="line">case $1 in</span><br><span class="line">    start)</span><br><span class="line">        echo &quot;Starting $SERVICE_NAME ...&quot;</span><br><span class="line">        if [ ! -f $PID_PATH_NAME ]; then</span><br><span class="line">            nohup java -jar $PATH_TO_JAR /tmp 2&gt;&gt; /dev/null &gt;&gt; /dev/null &amp; echo $! &gt; $PID_PATH_NAME</span><br><span class="line">            echo &quot;$SERVICE_NAME started ...&quot;</span><br><span class="line">        else</span><br><span class="line">            echo &quot;$SERVICE_NAME is already running ...&quot;</span><br><span class="line">        fi</span><br><span class="line">    ;;</span><br><span class="line">    stop)</span><br><span class="line">        if [ -f $PID_PATH_NAME ]; then</span><br><span class="line">            PID=$(cat $PID_PATH_NAME);</span><br><span class="line">            echo &quot;$SERVICE_NAME stoping ...&quot;</span><br><span class="line">            kill $PID;</span><br><span class="line">            echo &quot;$SERVICE_NAME stopped ...&quot;</span><br><span class="line">            rm $PID_PATH_NAME</span><br><span class="line">        else</span><br><span class="line">            echo &quot;$SERVICE_NAME is not running ...&quot;</span><br><span class="line">        fi</span><br><span class="line">    ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<p>start 할 때, pid 를 특정 파일에 저장하며, stop 할때 해당 pid를 kill 합니다.<br>자주 사용하는 기능으로,<br>pid를 저장함으로써 다시 실행하거나 중지할때 해당 파일을 kill 합니다.</p>
<p>이 스크립트의 문제는 별도의 서비스를 통해, 프로세스가 kill 되었을 때, 혹은<br>pid 파일이 삭제되면, stop을 하더라도 프로세스가 종료가 안될 수 있습니다.</p>
<hr>
<h1 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h1><hr>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="../../2018/10/2018-10-16-lamda02/">Java 8의 stream을 이용한 List 중복제거</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-10-16</time><div class="content"><p>Friend 라는 모델의 배열 형태에서 friend_id 를 중복을 제거해서 가져오고자</p>
<h2 id="기존코드"><a href="#기존코드" class="headerlink" title="기존코드"></a>기존코드</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; userIdList = new ArrayList&lt;String&gt;();</span><br><span class="line">for(Friend friend : insertList) &#123;</span><br><span class="line">   boolean isExist = false;</span><br><span class="line">   if (friend != null) &#123;</span><br><span class="line">      for(String user_id : userIdList) &#123;</span><br><span class="line">         if(friend.getUser_id().equals(user_id)) &#123;</span><br><span class="line">            isExist = true;         </span><br><span class="line">            break;      </span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      if(isExist == false) userIdList.add(friend.getUser_id());</span><br><span class="line">   &#125;     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="자바8-stream-사용"><a href="#자바8-stream-사용" class="headerlink" title="자바8 stream 사용"></a>자바8 stream 사용</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; userIdList = insertList.stream().map(Friend::getUser_id).distinct().collect(Collectors.toList());</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h1><hr>
<ul>
<li><a href="http://sexydynamite.blogspot.com/2015/02/java-8-stream-list.html" rel="external nofollow noopener noreferrer" target="_blank">Java 8의 stream을 이용한 List 중복제거</a></li>
</ul>
</div><hr></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="../../"><i class="fa fa-chevron-left"></i></a><a class="page-number" href="../../">1</a><span class="page-number current">2</span><a class="page-number" href="../3/">3</a><span class="space">&hellip;</span><a class="page-number" href="../11/">11</a><a class="extend next" rel="next" href="../3/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2019 By bymin</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" rel="external nofollow noopener noreferrer" target="_blank"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" rel="external nofollow noopener noreferrer" target="_blank"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="../../js/utils.js?version=1.6.1"></script><script src="../../js/fancybox.js?version=1.6.1"></script><script src="../../js/sidebar.js?version=1.6.1"></script><script src="../../js/copy.js?version=1.6.1"></script><script src="../../js/fireworks.js?version=1.6.1"></script><script src="../../js/transition.js?version=1.6.1"></script><script src="../../js/scroll.js?version=1.6.1"></script><script src="../../js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script></body></html>